!function(e){var t={};function n(o){if(t[o])return t[o].exports;var s=t[o]={i:o,l:!1,exports:{}};return e[o].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(o,s,function(t){return e[t]}.bind(null,s));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=63)}({63:function(e,t,n){e.exports=n(64)},64:function(e,t){$((function(){var e=$("#js-get-token").data(),t=$("#js-get-img-normal").data(),n=$("#js-get-img-good").data(),o=$("#js-get-stock").data();$(document).ready((function(){$(".c-evaluation-star").each((function(){for(var e=$(this).data("count"),t=5-e,n="",o=0;o<e;o++)n+='<span class="c-evaluation-star-icon js-star-icon is-star-colord">★</span>';for(o=0;o<t;o++)n+='<span class="c-evaluation-star-icon js-star-icon">★</span>';$(this).append(n)}))})),$(".likes-flag").each((function(){var o=this;$(this).on("click",(function(s){var a=$(o).find(".reviewId").data("reviewid"),i=parseInt($(o).nextAll(".likes-count").text());$(o).hasClass("done")?$.ajax({type:"POST",url:"/review/"+a+"/unLike",dataType:"json",data:{_token:e.name,reviewId:a},context:o}).done((function(e){404===e?console.log(e):($(this).removeClass("done"),$(this).nextAll(".likes-count").text(i-=1),$(this).children("img").attr("src",t.name))})).fail((function(e){console.log("NG"+e.responseText)})):$(o).hasClass("done")||$.ajax({type:"POST",url:"/review/"+a+"/like",dataType:"json",data:{_token:e.name,reviewId:a},context:o}).done((function(e){404===e?console.log(e):($(this).addClass("done"),$(this).nextAll(".likes-count").text(i+=1),$(this).children("img").attr("src",n.name))})).fail((function(e){console.log("NG"+e.responseText)}))}))})),$(".p-detail-columns-reviews-sorts p").on("click",(function(){$(".p-detail-columns-reviews-sorts p").removeClass("sort-active"),$(this).addClass("sort-active")})),$(".c-modal-close").on("click",(function(){$(".js-form-input").val(null),$(".js-star-icon").removeClass("is-star-colord")}));var s=o.name;$(".stock").on("click",(function(){$(this).hasClass("is-remove")?$.ajax({type:"DELETE",url:"/review/"+s+"/unstock",dataType:"json",data:{_token:e.name,isbn:s},context:this}).done((function(e){$(this).removeClass("is-remove"),$(this).text("読みたい本リストに追加")})).fail((function(e){console.log("NG"+e.responseText)})):$(this).hasClass("is-remove")||$.ajax({type:"POST",url:"/review/"+s+"/stock",dataType:"json",data:{_token:e.name,isbn:s},context:this}).done((function(e){$(this).addClass("is-remove"),$(this).text("リストから削除")})).fail((function(e){console.log("NG"+e.responseText)}))})),$(".comment-post-button").on("click",(function(){var e=$(this).data("reviewid");$(".comment-review-id").val(e)})),$(".comments").hide(),$(".js-comment-button").each((function(e){var t=e;$(this).attr("id","js-"+t+"-comment-button"),$("#js-"+t+"-comment-button").on("click",(function(){$(".js-"+t+"-comments").slideToggle()}))})),$(".comments").each((function(e){var t=e;$(this).attr("class","js-"+t+"-comments")})),$(".is-view").on("click",(function(){if($(this).toggleClass("active"),$(this).hasClass("active"))var e=$(this).data("text-clicked");else e=$(this).data("text-default");$(this).html(e)}));s=o.name;$(".recommend").on("click",(function(){$(this).hasClass("is-remove")?$.ajax({type:"DELETE",url:"/review/"+s+"/unRecommend",dataType:"json",data:{_token:e.name,isbn:s},context:this}).done((function(e){404===e?console.log(e):($(this).removeClass("is-remove"),$(this).addClass("is-orange"),$(this).text("おすすめの本に設定"))})).fail((function(e){console.log("NG"+e.responseText)})):$(this).hasClass("is-remove")||$.ajax({type:"POST",url:"/review/"+s+"/recommend",dataType:"json",data:{_token:e.name,isbn:s},context:this}).done((function(e){$(this).removeClass("is-orange"),$(this).addClass("is-remove"),$(this).text("おすすめの本から削除")})).fail((function(e){console.log("NG"+e.responseText)}))}))}))}});